*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--color-bg);
  color:var(--color-text);
  font-family:system-ui,-apple-system,Segoe UI,Tahoma,Arial,"Noto Sans Arabic","Noto Naskh Arabic",sans-serif;
  line-height:1.5;
  font-variant-numeric:tabular-nums;
}

a{color:inherit}
img{max-width:100%}

.muted{color:var(--color-muted)}

/* ---------- App Shell v2 (global, RTL, light) ---------- */
body[data-page]:not([data-page="login"]){
  background:
    radial-gradient(1200px 620px at 100% -12%, rgba(79,138,123,.11), transparent 64%),
    radial-gradient(860px 420px at 0% 0%, rgba(79,138,123,.05), transparent 72%),
    linear-gradient(180deg, #fbfdfc 0%, #f6f8f7 52%, #f3f6f5 100%);
}

body[data-page]:not([data-page="login"]) .wrap{
  max-width:1240px;
  margin:auto;
  padding:20px;
}

body[data-page]:not([data-page="login"]) .topbar{
  position:sticky;
  top:10px;
  z-index:25;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
  margin-bottom:14px;
  padding:14px 16px;
  background:linear-gradient(180deg, rgba(255,255,255,.97), rgba(248,251,250,.94));
  border:1px solid var(--color-border);
  border-radius:22px 22px 10px 22px;
  box-shadow:var(--shadow-layer-1);
}

body.embed[data-page] .topbar,
body.embed[data-page] .sidebar,
body.embed[data-page] .sidebarOverlay{
  display:none !important;
}

body[data-page]:not([data-page="login"]) .brand b{
  font-size:22px;
  font-weight:700;
  letter-spacing:.01em;
}

body[data-page]:not([data-page="login"]) .brand .muted{
  color:var(--text-soft);
}

body[data-page]:not([data-page="login"]) .menuBtn{
  border:1px solid var(--color-border);
  background:var(--surface-1);
  padding:10px 12px;
  border-radius:12px 12px 8px 12px;
  cursor:pointer;
  transition:border-color .14s ease, box-shadow .14s ease, background .14s ease;
}

body[data-page]:not([data-page="login"]) .menuBtn:hover{
  border-color:#c4d2cc;
  box-shadow:0 8px 14px rgba(15,23,42,.08);
}

/* Sidebar */
body[data-page]:not([data-page="login"]) .sidebarOverlay{
  position:fixed;
  inset:0;
  background:rgba(10,14,12,.32);
  z-index:50;
}

body[data-page]:not([data-page="login"]) .sidebar{
  position:fixed;
  top:0;
  right:0;
  height:100vh;
  width:min(246px,88vw);
  background:linear-gradient(180deg, #ffffff 0%, #f6faf8 100%);
  border-left:1px solid var(--color-border);
  z-index:60;
  transform:translateX(100%);
  transition:transform .2s ease;
  display:flex;
  flex-direction:column;
  padding:16px;
  box-sizing:border-box;
  box-shadow:-18px 0 28px rgba(15,23,42,.12);
}

body[data-page]:not([data-page="login"]) .sidebar.open{transform:translateX(0)}

body[data-page]:not([data-page="login"]) .sidebarHeader{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
  position:relative;
  text-align:center;
}

body[data-page]:not([data-page="login"]) .sidebarHeader b{
  margin:0 auto;
  font-size:15px;
  font-weight:700;
  color:#5f6b67;
}

body[data-page]:not([data-page="login"]) .sidebarHeader .menuBtn{
  position:absolute;
  left:0;
  width:32px;
  height:32px;
  padding:6px 8px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#a12626;
  border-color:#eac4c4;
  background:#fff7f7;
}

body[data-page]:not([data-page="login"]) #sidebarContent{
  display:flex;
  flex-direction:column;
  gap:6px;
}

body[data-page]:not([data-page="login"]) #sidebarContent::before{
  content:"التنقل";
  display:block;
  font-size:11px;
  font-weight:600;
  color:#7a8783;
  letter-spacing:.03em;
  padding:0 2px 6px;
  border-bottom:1px solid var(--divider-soft);
  margin-bottom:2px;
}

body[data-page]:not([data-page="login"]) .sidebar a,
body[data-page]:not([data-page="login"]) .sidebar button{
  width:100%;
  max-width:100%;
  display:block;
  text-align:right;
  border:1px solid #d6e0dc;
  background:var(--surface-1);
  padding:10px 12px;
  border-radius:12px 12px 8px 12px;
  cursor:pointer;
  margin-top:0;
  font-family:inherit;
  font-size:14px;
  line-height:1.3;
  box-sizing:border-box;
  color:#1a1f1d;
  text-decoration:none;
  transition:border-color .14s ease, box-shadow .14s ease, background .14s ease;
}

body[data-page]:not([data-page="login"]) .sidebar a:hover,
body[data-page]:not([data-page="login"]) .sidebar button:hover{
  border-color:#bfd0ca;
  background:#fbfdfc;
  box-shadow:0 8px 14px rgba(15,23,42,.08);
}

body[data-page]:not([data-page="login"]) .sidebar .danger{
  border-color:#efc5c5;
  color:#a63434;
  background:#fff6f6;
  margin-top:8px;
}

/* Sidebar active indicator (RTL right edge) */
.sidebar a{position:relative;padding-inline-end:18px}
.sidebar a.is-active,
.sidebar a[aria-current="page"],
body[data-page="index"] .sidebar a[href*="index.html"],
body[data-page="pickup-dashboard"] .sidebar a[href*="pickup-dashboard.html"],
body[data-page="homepickup"] .sidebar a[href*="homepickup.html"],
body[data-page="pickuppoint"] .sidebar a[href*="pickuppoint.html"],
body[data-page="collections"] .sidebar a[href*="collections.html"],
body[data-page="archive"] .sidebar a[href*="archive.html"],
body[data-page="finance"] .sidebar a[href*="finance.html"]{
  background:var(--brand-tint);
  font-weight:700;
  border-color:#bfd7cf;
  color:#24584b;
}
.sidebar a.is-active::after,
.sidebar a[aria-current="page"]::after,
body[data-page="index"] .sidebar a[href*="index.html"]::after,
body[data-page="pickup-dashboard"] .sidebar a[href*="pickup-dashboard.html"]::after,
body[data-page="homepickup"] .sidebar a[href*="homepickup.html"]::after,
body[data-page="pickuppoint"] .sidebar a[href*="pickuppoint.html"]::after,
body[data-page="collections"] .sidebar a[href*="collections.html"]::after,
body[data-page="archive"] .sidebar a[href*="archive.html"]::after,
body[data-page="finance"] .sidebar a[href*="finance.html"]::after{
  content:"";
  position:absolute;
  top:6px;
  bottom:6px;
  right:6px;
  width:3px;
  border-radius:999px;
  background:var(--brand);
}

/* Segmented tabs */
body[data-page]:not([data-page="login"]) .tabs{
  display:flex;
  gap:6px;
  align-items:center;
  padding:6px;
  border-radius:16px 16px 10px 16px;
  border:1px solid var(--color-border);
  background:linear-gradient(180deg, rgba(255,255,255,.96), rgba(248,251,250,.95));
  box-shadow:0 8px 14px rgba(15,23,42,.05);
  margin:8px 0 14px;
}

body[data-page]:not([data-page="login"]) .tabBtn,
body[data-page]:not([data-page="login"]) .tabLink,
body[data-page]:not([data-page="login"]) .modeBtn{
  border:none;
  background:transparent;
  color:#5e6b67;
  padding:9px 14px;
  border-radius:11px 11px 8px 11px;
  cursor:pointer;
  font-weight:600;
  font-family:inherit;
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  gap:6px;
  transition:background .14s ease, color .14s ease, box-shadow .14s ease;
}

body[data-page]:not([data-page="login"]) .tabBtn:hover,
body[data-page]:not([data-page="login"]) .tabLink:hover,
body[data-page]:not([data-page="login"]) .modeBtn:hover{
  background:#f1f7f4;
  color:#33433e;
}

body[data-page]:not([data-page="login"]) .tabBtn.active,
body[data-page]:not([data-page="login"]) .tabLink.active,
body[data-page]:not([data-page="login"]) .modeBtn.active{
  position:relative;
  background:#eaf4f1;
  color:#25584c;
  box-shadow:inset 0 0 0 1px #b9d5cc;
}

body[data-page]:not([data-page="login"]) .tabBtn.active::after,
body[data-page]:not([data-page="login"]) .tabLink.active::after{
  content:"";
  position:absolute;
  right:8px;
  top:7px;
  bottom:7px;
  width:3px;
  border-radius:999px;
  background:var(--brand);
}

body[data-page]:not([data-page="login"]) .modeSwitch{
  display:inline-flex;
  align-items:center;
  gap:6px;
  background:#fff;
  border:1px solid var(--color-border);
  padding:4px;
  border-radius:999px;
  box-shadow:0 4px 10px rgba(15,23,42,.05);
}

/* Core surfaces */
body[data-page]:not([data-page="login"]) .card{
  background:var(--surface-1);
  border:1px solid var(--color-border);
  border-radius:18px 18px 10px 18px;
  box-shadow:var(--shadow-layer-1);
}

.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

/* Buttons: Stripe-like hierarchy */
body[data-page]:not([data-page="login"]) .btn,
body[data-page]:not([data-page="login"]) .btn-primary,
body[data-page]:not([data-page="login"]) .btn-secondary,
body[data-page]:not([data-page="login"]) .btn-danger{
  border:1px solid #d6e1dc;
  background:#fff;
  padding:10px 14px;
  border-radius:999px;
  cursor:pointer;
  font-family:inherit;
  font-weight:600;
  color:#1f2623;
  transition:background .14s ease, border-color .14s ease, color .14s ease, box-shadow .14s ease, transform .14s ease;
}

body[data-page]:not([data-page="login"]) .btn:hover,
body[data-page]:not([data-page="login"]) .btn-primary:hover,
body[data-page]:not([data-page="login"]) .btn-secondary:hover,
body[data-page]:not([data-page="login"]) .btn-danger:hover{
  border-color:#bfd0ca;
  box-shadow:0 8px 14px rgba(15,23,42,.08);
  transform:translateY(-1px);
}

body[data-page]:not([data-page="login"]) .btn.primary,
body[data-page]:not([data-page="login"]) .btn-primary{
  background:var(--brand);
  color:#fff;
  border-color:var(--brand);
  box-shadow:0 10px 16px rgba(79,138,123,.22);
}

body[data-page]:not([data-page="login"]) .btn.primary:hover,
body[data-page]:not([data-page="login"]) .btn-primary:hover{
  background:var(--brand-hover);
  border-color:var(--brand-hover);
  box-shadow:0 12px 18px rgba(79,138,123,.28);
}

body[data-page]:not([data-page="login"]) .btn-secondary{
  background:#fff;
  color:var(--color-text);
  border-color:var(--color-border);
}

body[data-page]:not([data-page="login"]) .btn.danger,
body[data-page]:not([data-page="login"]) .btn-danger{
  border-color:#efc5c5;
  background:#fff6f6;
  color:var(--color-danger);
}

body[data-page]:not([data-page="login"]) .btn:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}

body[data-page]:not([data-page="login"]) .icon-btn{
  width:36px;
  height:36px;
  border:1px solid var(--color-border);
  background:#fff;
  border-radius:11px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

/* Forms: Stripe-like polish */
body[data-page]:not([data-page="login"]) input,
body[data-page]:not([data-page="login"]) select,
body[data-page]:not([data-page="login"]) textarea{
  padding:10px 12px;
  border:1px solid #d4dfda;
  border-radius:11px;
  font-family:inherit;
  background:#fff;
  color:var(--color-text);
  min-height:40px;
}

body[data-page]:not([data-page="login"]) input:focus,
body[data-page]:not([data-page="login"]) select:focus,
body[data-page]:not([data-page="login"]) textarea:focus{
  outline:none;
  box-shadow:var(--focus-ring);
  border-color:var(--brand);
}

body[data-page]:not([data-page="login"]) textarea{min-height:90px;resize:vertical}

/* Heart checkbox */
.love{
  --love-scale:2.6;
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:30px;
  height:26px;
  flex:0 0 auto;
}

.love input[type="checkbox"],
#switch{
  display:none;
}

.love .love-heart,
.love .love-heart::after{
  border-color:hsl(231deg 28% 86%);
  border:1px solid;
  border-top-left-radius:100px;
  border-top-right-radius:100px;
  width:10px;
  height:8px;
  border-bottom:0;
}

.love .round{
  position:absolute;
  z-index:1;
  width:8px;
  height:8px;
  background:hsl(0deg 0% 100%);
  box-shadow:rgb(0 0 0 / 24%) 0px 0px 4px 0px;
  border-radius:100%;
  left:0px;
  bottom:-1px;
  transition:all .5s ease;
  animation:check-animation2 .5s forwards;
}

.love input[type="checkbox"]:checked + label .round{
  transform:translate(0px, 0px);
  animation:check-animation .5s forwards;
  background-color:hsl(0deg 0% 100%);
}

@keyframes check-animation{
  0%{transform:translate(0px, 0px);}
  50%{transform:translate(0px, 7px);}
  100%{transform:translate(7px, 7px);}
}

@keyframes check-animation2{
  0%{transform:translate(7px, 7px);}
  50%{transform:translate(0px, 7px);}
  100%{transform:translate(0px, 0px);}
}

.love .love-heart{
  box-sizing:border-box;
  position:relative;
  transform:rotate(-45deg) translate(-50%, -33px) scale(var(--love-scale));
  transform-origin:center;
  display:block;
  border-color:hsl(231deg 28% 86%);
  cursor:pointer;
  top:0;
}

.love input[type="checkbox"]:checked + .love-heart,
.love input[type="checkbox"]:checked + .love-heart::after,
.love input[type="checkbox"]:checked + .love-heart .bottom{
  border-color:hsl(347deg 81% 61%);
  box-shadow:inset 6px -5px 0px 2px hsl(347deg 99% 72%);
}

.love .love-heart::after,
.love .love-heart .bottom{
  content:"";
  display:block;
  box-sizing:border-box;
  position:absolute;
  border-color:hsl(231deg 28% 86%);
}

.love .love-heart::after{
  right:-9px;
  transform:rotate(90deg);
  top:7px;
}

.love .love-heart .bottom{
  width:11px;
  height:11px;
  border-left:1px solid;
  border-bottom:1px solid;
  border-color:hsl(231deg 28% 86%);
  left:-1px;
  top:5px;
  border-radius:0px 0px 0px 5px;
}

.love input[type="checkbox"]:checked + .love-heart path[data-path="box"]{
  fill:hsl(347deg 81% 61% / .08);
}

@media(max-width:900px){
  .love{
    --love-scale:2.2;
    width:26px;
    height:22px;
  }
}

/* Chips + labels */
body[data-page]:not([data-page="login"]) .chip,
body[data-page]:not([data-page="login"]) .pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid #d3e0db;
  font-size:12px;
  font-weight:600;
  background:#f2f7f5;
  color:#2d5f52;
}

.badge,
.statusWrap .badge{
  display:inline-flex;
  align-items:center;
  gap:7px;
  padding:5px 10px;
  border-radius:999px;
  border:1px solid #d7e1dd;
  font-size:12px;
  font-weight:600;
  background:#f8fbfa;
  color:#3f4b47;
}

.badge::before,
.statusWrap .badge::before{
  content:"";
  width:7px;
  height:7px;
  border-radius:999px;
  background:var(--badge-dot, var(--color-muted));
  flex:0 0 7px;
}

.badge-success,
.statusWrap .badge-success{--badge-dot:var(--color-success)}
.badge-warning,
.statusWrap .badge-warning{--badge-dot:var(--color-warning)}
.badge-danger,
.statusWrap .badge-danger{--badge-dot:var(--color-danger)}
.badge-neutral,
.statusWrap .badge-neutral{--badge-dot:var(--color-muted)}

.statusWrap{
  display:inline-flex;
  align-items:center;
  border:1px solid #d7e1dd;
  background:#f8fbfa;
  border-radius:999px;
  padding:5px 10px;
}
.statusWrap .badge{border:none;background:transparent;padding:0;color:inherit}
.statusWrap .badge::before{margin-inline-start:0}

.kpi .value{color:var(--brand)}
.kpi .value.muted{color:var(--color-muted)}
.kpi .value.neg{color:var(--color-danger)}

/* Order tiles */
body[data-page]:not([data-page="login"]) .orderItem{
  position:relative;
  border:1px solid #d7e2dd;
  border-radius:12px 12px 8px 12px;
  padding:10px;
  background:#fff;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
  transition:border-color .14s ease, box-shadow .14s ease, transform .14s ease, background .14s ease;
}

body[data-page]:not([data-page="login"]) .orderItem:hover{
  border-color:#bed0ca;
  box-shadow:0 10px 14px rgba(15,23,42,.08);
  transform:translateY(-1px);
}

body[data-page]:not([data-page="login"]) .orderItem.active{
  border-color:#aed0c6;
  background:#eaf4f1;
  box-shadow:0 10px 14px rgba(79,138,123,.12);
}

body[data-page]:not([data-page="login"]) .orderItem.active::after{
  content:"";
  position:absolute;
  right:0;
  top:8px;
  bottom:8px;
  width:3px;
  border-radius:999px;
  background:var(--brand);
}

/* Tables/lists: GitHub clarity + soft cards */
body[data-page]:not([data-page="login"]) .tableWrap{
  background:transparent;
  border:none;
  border-radius:0;
  padding:0;
}

body[data-page]:not([data-page="login"]) .tableWrap table,
body[data-page]:not([data-page="login"]) .listTable{
  width:max-content;
  min-width:100%;
  border-collapse:separate;
  border-spacing:0 8px;
}

body[data-page]:not([data-page="login"]) .tableWrap thead th,
body[data-page]:not([data-page="login"]) .listTable thead th,
body[data-page]:not([data-page="login"]) .tableWrap th,
body[data-page]:not([data-page="login"]) .listTable th{
  position:static;
  background:transparent;
  border:none;
  color:#6b7874;
  font-size:12px;
  font-weight:600;
  padding:0 10px 2px;
  text-align:right;
  vertical-align:middle;
}

body[data-page]:not([data-page="login"]) .tableWrap tbody td,
body[data-page]:not([data-page="login"]) .listTable tbody td,
body[data-page]:not([data-page="login"]) .tableWrap td,
body[data-page]:not([data-page="login"]) .listTable td{
  background:#fff;
  border-top:1px solid #d9e3de;
  border-bottom:1px solid #d9e3de;
  border-left:none;
  border-right:none;
  padding:10px;
  text-align:right;
  vertical-align:middle;
}

body[data-page]:not([data-page="login"]) .tableWrap tbody td:first-child,
body[data-page]:not([data-page="login"]) .listTable tbody td:first-child{
  border-right:1px solid #d9e3de;
  border-radius:0 12px 12px 0;
}

body[data-page]:not([data-page="login"]) .tableWrap tbody td:last-child,
body[data-page]:not([data-page="login"]) .listTable tbody td:last-child{
  border-left:1px solid #d9e3de;
  border-radius:12px 0 0 12px;
}

body[data-page]:not([data-page="login"]) .tableWrap tbody tr:hover td,
body[data-page]:not([data-page="login"]) .listTable tbody tr:hover td,
body[data-page]:not([data-page="login"]) tbody tr:hover td{
  background:#f6fbf9;
  border-top-color:#c4d7d0;
  border-bottom-color:#c4d7d0;
}

body[data-page="pickup-dashboard"] .panelFrame{
  border:1px solid var(--color-border);
  border-radius:18px;
  background:var(--surface-1);
  box-shadow:var(--shadow-layer-1);
}

/* Search/autocomplete surfaces */
body[data-page]:not([data-page="login"]) .searchResults,
body[data-page]:not([data-page="login"]) .autoList{
  border:1px solid #d5e1dc;
  border-radius:14px;
  background:#fff;
  box-shadow:0 14px 24px rgba(15,23,42,.12);
  overflow:hidden;
}

body[data-page]:not([data-page="login"]) .searchResults button,
body[data-page]:not([data-page="login"]) .autoList button{
  width:100%;
  text-align:right;
  border:none;
  background:#fff;
  padding:10px;
  cursor:pointer;
  border-bottom:1px solid var(--divider-soft);
  font-family:inherit;
}

body[data-page]:not([data-page="login"]) .searchResults button:last-child,
body[data-page]:not([data-page="login"]) .autoList button:last-child{border-bottom:none}

body[data-page]:not([data-page="login"]) .searchResults button:hover,
body[data-page]:not([data-page="login"]) .autoList button:hover{background:#f7fbf9}

/* Toasts */
.toast-container{
  position:fixed;
  bottom:16px;
  inset-inline-end:16px;
  display:flex;
  flex-direction:column;
  gap:8px;
  z-index:9999;
}

.toast{
  background:#16201d;
  color:#fff;
  padding:10px 12px;
  border-radius:12px;
  display:flex;
  align-items:center;
  gap:10px;
  box-shadow:var(--shadow-layer-2);
  min-width:220px;
}

.toast .toast-action{
  background:#fff;
  color:#111;
  border:none;
  padding:4px 8px;
  border-radius:10px;
  cursor:pointer;
}

.toast.info{background:#1a2421}
.toast.success{background:#1f7a4d}
.toast.warning{background:#9b7718}
.toast.danger{background:#b42318}

/* Modal */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(10,14,12,.35);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9998;
}

.modal{
  background:#fff;
  border-radius:20px 20px 10px 20px;
  border:1px solid var(--color-border);
  box-shadow:var(--shadow-layer-2);
  max-width:440px;
  width:92%;
  padding:18px;
}

.modal h3{margin:0 0 8px 0;font-size:18px}
.modal p{margin:0 0 12px 0;color:var(--color-muted)}
.modal .row{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}

.skeleton{
  height:12px;
  border-radius:6px;
  background:linear-gradient(90deg,#f2f4f7,#e9edf3,#f2f4f7);
  background-size:200% 100%;
  animation:skeleton 1.2s ease-in-out infinite;
}

@keyframes skeleton{0%{background-position:0%}100%{background-position:-200%}}

:focus-visible{outline:none;box-shadow:var(--focus-ring)}

@media(max-width:900px){
  body[data-page]:not([data-page="login"]) .wrap{padding:14px}
  body[data-page]:not([data-page="login"]) .topbar{padding:11px 12px;border-radius:18px 18px 10px 18px}
}
